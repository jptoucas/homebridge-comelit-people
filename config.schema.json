{
  "pluginAlias": "ComelitPeoplePlatform",
  "pluginType": "platform",
  "singular": true,
  "headerDisplay": "Plugin Homebridge pour le syst√®me d'interphonie Comelit Group. Contr√¥lez vos serrures, sonnettes et cam√©ras via l'API Comelit People.",
  "footerDisplay": "üîê Deux m√©thodes d'authentification : (1) Email + Mot de passe (recommand√©) ou (2) Token manuel + Device UUID + Apartment ID",
  "schema": {
    "type": "object",
    "properties": {
      "name": {
        "title": "Nom",
        "type": "string",
        "default": "Comelit People",
        "required": true,
        "description": "Nom de la plateforme dans Homebridge"
      },
      "email": {
        "title": "Email Comelit",
        "type": "string",
        "description": "Votre email de connexion Comelit (m√©thode recommand√©e). Si renseign√©, le token sera automatiquement r√©cup√©r√©."
      },
      "password": {
        "title": "Mot de passe Comelit",
        "type": "string",
        "description": "Votre mot de passe Comelit. Utilis√© uniquement si email est renseign√©."
      },
      "token": {
        "title": "CCS Token (optionnel)",
        "type": "string",
        "description": "Token d'authentification Comelit (ccstoken). Ignor√© si email/password sont fournis."
      },
      "deviceUuid": {
        "title": "Device UUID (optionnel)",
        "type": "string",
        "description": "UUID du dispositif Comelit. Ignor√© si email/password sont fournis."
      },
      "apartmentId": {
        "title": "Apartment ID (optionnel)",
        "type": "string",
        "description": "Identifiant de l'appartement. Ignor√© si email/password sont fournis."
      },
      "baseURL": {
        "title": "URL de base API",
        "type": "string",
        "default": "https://api.comelitgroup.com/servicerest",
        "description": "URL de base de l'API Comelit Group"
      },
      "pollInterval": {
        "title": "Intervalle de polling (ms)",
        "type": "integer",
        "default": 5000,
        "minimum": 1000,
        "description": "Intervalle de v√©rification des √©v√©nements de sonnette (en millisecondes)"
      },
      "lockIds": {
        "title": "IDs des serrures",
        "type": "array",
        "items": {
          "type": "string"
        },
        "description": "Liste des IDs de serrures √† exposer (ex: ['SB100001.1']). Laissez vide pour d√©tecter automatiquement."
      },
      "enableCamera": {
        "title": "Activer la cam√©ra",
        "type": "boolean",
        "default": true,
        "description": "Activer le support de streaming vid√©o pour la sonnette/cam√©ra"
      },
      "videoConfig": {
        "title": "Configuration vid√©o",
        "type": "object",
        "properties": {
          "maxWidth": {
            "title": "Largeur maximale",
            "type": "integer",
            "default": 1280,
            "minimum": 320,
            "maximum": 1920
          },
          "maxHeight": {
            "title": "Hauteur maximale",
            "type": "integer",
            "default": 720,
            "minimum": 240,
            "maximum": 1080
          },
          "maxFPS": {
            "title": "FPS maximum",
            "type": "integer",
            "default": 30,
            "minimum": 10,
            "maximum": 60
          },
          "maxBitrate": {
            "title": "Bitrate maximum (kbps)",
            "type": "integer",
            "default": 1000,
            "minimum": 300,
            "maximum": 4000
          },
          "forceMax": {
            "title": "Forcer les valeurs maximales",
            "type": "boolean",
            "default": false
          },
          "vcodec": {
            "title": "Codec vid√©o",
            "type": "string",
            "default": "libx264",
            "enum": ["libx264", "copy"]
          },
          "audio": {
            "title": "Activer l'audio",
            "type": "boolean",
            "default": true
          }
        }
      }
    }
  },
  "layout": [
    {
      "type": "fieldset",
      "title": "üîê Authentification Comelit",
      "expandable": false,
      "description": "Choisissez votre m√©thode d'authentification",
      "items": [
        "name",
        {
          "type": "help",
          "helpvalue": "<h5>M√©thode 1 : Email + Mot de passe (Recommand√©)</h5><p>Le plugin r√©cup√©rera automatiquement votre token et vos identifiants.</p>"
        },
        "email",
        "password",
        {
          "type": "help",
          "helpvalue": "<h5>M√©thode 2 : Configuration manuelle</h5><p>Utilisez cette m√©thode uniquement si vous avez d√©j√† un token.</p>"
        },
        "token",
        "deviceUuid",
        "apartmentId",
        "baseURL"
      ]
    },
    {
      "type": "fieldset",
      "title": "Configuration des dispositifs",
      "expandable": true,
      "items": [
        "pollInterval",
        {
          "key": "lockIds",
          "type": "array",
          "items": {
            "type": "string",
            "placeholder": "SB100001.1"
          }
        },
        "enableCamera"
      ]
    },
    {
      "type": "fieldset",
      "title": "Configuration vid√©o avanc√©e",
      "expandable": true,
      "items": [
        "videoConfig.maxWidth",
        "videoConfig.maxHeight",
        "videoConfig.maxFPS",
        "videoConfig.maxBitrate",
        "videoConfig.forceMax",
        "videoConfig.vcodec",
        "videoConfig.audio"
      ]
    }
  ]
}
